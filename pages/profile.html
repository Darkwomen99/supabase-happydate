<!DOCTYPE html>
<html lang="pl" class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white transition-colors">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HappyDate – Mój profil</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase scripts (додавай свою конфігурацію!) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    html, body { font-family: 'Montserrat', Arial, sans-serif; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-tr from-blue-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-300">

<!-- HEADER -->
<header class="bg-gradient-to-r from-blue-400 to-cyan-400 py-4 sticky top-0 z-50 shadow-md transition-shadow" aria-label="Główna nawigacja">
  <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <h1 class="text-2xl font-bold text-white cursor-pointer hover:underline" aria-label="HappyDate logo">🎁 HappyDate</h1>
      <span class="hidden md:inline text-base italic text-white opacity-80">Twój ciepły asystent prezentowy</span>
    </div>
    <nav class="hidden sm:flex gap-5 items-center text-white font-medium" aria-label="Główne menu">
      <a href="/pages/index.html" class="hover:underline">Strona główna</a>
      <a href="/pages/services.html" class="hover:underline">Usługi</a>
      <a href="/pages/dashboard.html" class="hover:underline">Moje wydarzenia</a>
      <a href="/pages/partnerstwo.html" class="hover:underline">Partnerstwo</a>
      <a href="/pages/about.html" class="hover:underline">O nas</a>
      <a href="/pages/reviews.html" class="hover:underline">Opinie</a>
      <a href="/pages/profile.html" class="underline font-bold">Profil</a>
    </nav>
    <!-- Мова -->
    <div>
      <button id="langDropdownBtn" class="flex items-center gap-2 px-3 py-2 rounded border bg-white/10 text-white hover:bg-white/20 transition focus:ring-2 focus:ring-blue-300" aria-label="Zmień język" type="button">
        <span id="langFlag">🌐</span>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
        </svg>
      </button>
      <div id="langDropdown" class="absolute right-0 mt-2 bg-white shadow-xl rounded-xl z-50 py-2 min-w-[150px] hidden text-left">
        <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100" data-lang="pl"><span>🇵🇱</span> Polski</button>
        <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100" data-lang="ua"><span>🇺🇦</span> Українська</button>
        <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100" data-lang="en"><span>🇬🇧</span> English</button>
        <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100" data-lang="ru"><span>🇷🇺</span> Русский</button>
        <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100" data-lang="de"><span>🇩🇪</span> Deutsch</button>
      </div>
    </div>
  </div>
</header>

<!-- TOAST -->
<div id="toast" class="fixed top-8 right-8 z-50 px-5 py-3 rounded-xl bg-green-600 text-white font-semibold shadow-xl transition-all duration-300 opacity-0 pointer-events-none"></div>

<!-- MODAL: Додавання/редагування події -->
<dialog id="eventModal" class="rounded-2xl shadow-lg p-0">
  <form method="dialog" id="eventForm" class="p-6 bg-white dark:bg-gray-800 flex flex-col gap-4 min-w-[320px]">
    <h3 class="text-lg font-bold mb-1">Dodaj / Edytuj wydarzenie</h3>
    <input type="text" id="eventTitle" class="border rounded-lg py-2 px-3" placeholder="Tytuł wydarzenia" required />
    <input type="date" id="eventDate" class="border rounded-lg py-2 px-3" required />
    <input type="text" id="eventForWho" class="border rounded-lg py-2 px-3" placeholder="Dla kogo prezent?" />
    <textarea id="eventComment" class="border rounded-lg py-2 px-3" placeholder="Uwagi, preferencje..." rows="2"></textarea>
    <div class="flex gap-4 mt-2">
      <button type="submit" class="bg-pink-500 text-white rounded-xl px-4 py-2">Zapisz</button>
      <button type="button" onclick="eventModal.close()" class="rounded-xl px-4 py-2 border">Anuluj</button>
    </div>
  </form>
</dialog>

<main class="max-w-6xl mx-auto px-2 sm:px-6 py-10 flex flex-col md:flex-row gap-10">
  <!-- Профіль та налаштування -->
  <aside class="md:w-1/3 bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 flex flex-col items-center space-y-7 border-t-4 border-pink-300 dark:border-cyan-400 relative">
    <!-- Фото -->
    <div class="relative group">
      <img id="user-photo" src="https://api.dicebear.com/8.x/fun-emoji/svg?seed=gift" alt="Avatar" class="w-28 h-28 rounded-full object-cover border-4 border-cyan-300 shadow-xl transition-all duration-300 hover:scale-105 hover:ring-4 hover:ring-pink-200 cursor-pointer bg-white" title="Kliknij, by zmienić zdjęcie">
      <input type="file" id="photoFile" accept="image/*" class="hidden" />
      <span class="absolute bottom-2 right-2 bg-pink-500 text-white rounded-full p-2 shadow text-xl opacity-0 group-hover:opacity-100 transition">&#128247;</span>
    </div>
    <!-- Анкета -->
    <form id="profile-form" class="flex flex-col gap-4 w-full" autocomplete="off">
      <label>
        <span class="text-base font-medium">👤 Imię</span>
        <input type="text" id="name" class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 font-semibold focus:ring-2 focus:ring-pink-400 transition" placeholder="Twoje imię" />
      </label>
      <label>
        <span class="text-base font-medium">👤 Nazwisko</span>
        <input type="text" id="surname" class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 font-semibold focus:ring-2 focus:ring-pink-400 transition" placeholder="Twoje nazwisko" />
      </label>
      <label>
        <span class="text-base font-medium">✉️ Email</span>
        <input type="email" id="email" readonly class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 opacity-60 cursor-not-allowed" />
      </label>
      <label>
        <span class="text-base font-medium">📱 Telefon</span>
        <input type="tel" id="phone" class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 transition" placeholder="Numer telefonu" />
      </label>
      <label>
        <span class="text-base font-medium">🎂 Data urodzenia</span>
        <input type="date" id="birthdate" class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 transition" />
      </label>
      <label>
        <span class="text-base font-medium">⚧️ Płeć</span>
        <select id="gender" class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 transition">
          <option value="">Wybierz...</option>
          <option value="f">Kobieta</option>
          <option value="m">Mężczyzna</option>
          <option value="other">Inna / Wolę nie mówić</option>
        </select>
      </label>
      <label>
        <span class="text-base font-medium">⭐ Preferencje / zainteresowania</span>
        <textarea id="preferences" class="w-full border rounded-lg py-2 px-3 dark:bg-gray-700 bg-gray-50 transition" rows="2" placeholder="Ulubione prezenty, pasje, marzenia..."></textarea>
      </label>
      <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-blue-500 hover:from-pink-600 hover:to-blue-600 text-white font-bold py-2 rounded-xl shadow transition flex items-center gap-2 justify-center">
        <span class="text-xl">💾</span>
        <span id="save-profile-btn-text">Zapisz profil</span>
      </button>
      <div id="profile-progress" class="mt-2 text-xs text-gray-500"></div>
    </form>
    <!-- Бонуси -->
    <div class="bg-gradient-to-r from-pink-100 via-white to-cyan-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-800 rounded-2xl shadow-lg w-full text-center py-4 relative overflow-hidden">
      <h3 class="text-lg font-semibold flex items-center justify-center gap-2">🎁 Twoje punkty <span id="user-level" class="ml-2 bg-pink-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg">Nowicjusz</span></h3>
      <p class="text-4xl font-black text-pink-500 drop-shadow" id="userPoints">0 pkt</p>
      <p class="text-xs text-gray-500 mt-2">Za uzupełnienie ankiety otrzymujesz <span class="font-bold text-green-600">+20 punktów</span></p>
    </div>
    <!-- Запроси друга -->
    <div class="bg-gradient-to-r from-yellow-100 via-white to-green-100 rounded-2xl shadow px-4 py-3 mt-3 text-center">
      <span class="font-semibold text-green-700">Poleć znajomego – otrzymaj bonus!</span>
      <p class="text-xs text-gray-500">Udostępnij swój link polecający i odbierz punkty.</p>
      <button class="bg-green-500 text-white rounded-xl px-4 py-1 mt-2" id="referral-btn">Skopiuj link</button>
    </div>
    <!-- Вийти -->
    <button id="logout-btn" class="mt-3 px-4 py-2 rounded-xl bg-red-600 text-white font-semibold transition hover:bg-red-700 w-full">Wyloguj się</button>
    <p class="mt-2 text-xs text-gray-400 text-center">Wszystkie dane są bezpieczne i wykorzystywane wyłącznie do organizacji zamówień.</p>
    <!-- Контакт підтримки -->
    <div class="mt-4 text-center">
      <a href="mailto:support@happydate.pl" class="text-blue-500 underline text-xs">Potrzebujesz pomocy? Napisz do nas!</a>
    </div>
  </aside>
  
  <!-- Основний контент -->
  <section class="flex-1 flex flex-col gap-8">
    <!-- Нагадування -->
    <div class="bg-gradient-to-r from-cyan-100 via-white to-pink-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 rounded-2xl shadow-md py-4 px-5 flex items-center gap-4" aria-live="polite">
      <span class="text-2xl animate-pulse">⏰</span>
      <div class="flex-1">
        <p class="font-semibold text-gray-800 dark:text-white">Nie przegap ważnej daty!</p>
        <p class="text-sm text-gray-500">Otrzymasz przypomnienie o każdej zaplanowanej okazji i propozycję prezentu.</p>
      </div>
    </div>
    <!-- Мої події -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl py-8 px-4 relative overflow-visible">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold flex items-center gap-2"><span>📅</span> Moje wydarzenia i rezerwacje</h2>
        <button id="add-event-btn" class="bg-pink-500 hover:bg-pink-600 text-white px-4 py-2 rounded-xl shadow flex items-center gap-2"><span class="text-xl">➕</span>Dodaj wydarzenie</button>
      </div>
      <div id="event-list" class="space-y-4 min-h-[90px]"></div>
      <div id="event-empty" class="text-center py-8 text-gray-400 hidden">
        <div class="text-4xl mb-2 animate-bounce">😔</div>
        <div class="mb-3 font-semibold">Nie masz jeszcze wydarzeń</div>
        <a href="/pages/dashboard.html" class="inline-block bg-pink-500 hover:bg-pink-600 text-white px-6 py-2 rounded-xl shadow transition mt-2">➕ Dodaj pierwsze wydarzenie</a>
      </div>
      <!-- Історія активності -->
      <div class="bg-white dark:bg-gray-900 rounded-2xl shadow px-4 py-4 mt-8">
        <h4 class="font-semibold mb-2 flex gap-2 items-center"><span>🕒</span> Ostatnia aktywność</h4>
        <ul id="history-list" class="list-disc list-inside text-gray-600 dark:text-gray-400 text-sm space-y-1"></ul>
      </div>
    </div>
    <!-- AI-помічник -->
    <div class="bg-gradient-to-r from-blue-200 via-pink-50 to-cyan-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 rounded-2xl shadow flex items-center gap-4 px-6 py-5">
      <span class="text-3xl">🤖</span>
      <div class="flex-1">
        <p class="font-semibold">Nie wiesz, co wybrać?</p>
        <p class="text-sm text-gray-500">Skorzystaj z naszego AI, aby dobrać prezent. Rozpocznij rozmowę już teraz!</p>
      </div>
      <button class="bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl shadow flex items-center gap-2" id="ai-bot-btn">Spróbuj AI-bota</button>
    </div>
  </section>
</main>

<footer class="bg-blue-500 text-white text-center py-4 mt-12 shadow-inner">
  &copy; 2025 HappyDate. Z miłością tworzymy niezapomniane chwile.
</footer>
</body>
</html>
