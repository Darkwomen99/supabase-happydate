<!DOCTYPE html>
<html lang="pl" class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white transition-colors">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HappyDate – Mój profil</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <style>
    html, body { font-family: 'Montserrat', Arial, sans-serif; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-tr from-blue-50 via-white to-pink-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 transition-colors duration-300"
      data-auth-guard="required" data-auth-redirect="/pages/login.html">

<!-- HEADER -->
<header class="bg-gradient-to-r from-blue-400 to-cyan-400 py-4 sticky top-0 z-50 shadow-md transition-shadow" aria-label="Główna nawigacja">
  <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
    <div class="flex items-center gap-3">
      <h1 class="text-2xl font-bold text-white cursor-pointer hover:underline">🎁 HappyDate</h1>
      <span class="hidden md:inline text-base italic text-white opacity-80">Twój ciepły asystent prezentowy</span>
    </div>
    <nav class="hidden sm:flex gap-5 items-center text-white font-medium">
      <a href="/index.html" class="hover:underline">Strona główna</a>
      <a href="/pages/services.html" class="hover:underline">Usługi</a>
      <a href="/pages/dashboard.html" class="hover:underline">Moje wydarzenia</a>
      <a href="/pages/profile.html" class="underline font-bold">Profil</a>
    </nav>
  </div>
</header>

<!-- TOAST -->
<div id="toast" class="fixed top-8 right-8 z-50 px-5 py-3 rounded-xl bg-green-600 text-white font-semibold shadow-xl transition-all duration-300 opacity-0 pointer-events-none"></div>

<main class="max-w-6xl mx-auto px-2 sm:px-6 py-10 flex flex-col md:flex-row gap-10">
  <!-- Профіль -->
  <aside class="md:w-1/3 bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 flex flex-col items-center space-y-7 border-t-4 border-pink-300 dark:border-cyan-400">
    <!-- Фото -->
    <div class="relative group">
      <img id="user-photo" src="https://api.dicebear.com/8.x/fun-emoji/svg?seed=gift" alt="Avatar"
           class="w-28 h-28 rounded-full object-cover border-4 border-cyan-300 shadow-xl transition-all duration-300 hover:scale-105 hover:ring-4 hover:ring-pink-200 cursor-pointer bg-white">
      <input type="file" id="photoFile" accept="image/*" class="hidden" />
      <span class="absolute bottom-2 right-2 bg-pink-500 text-white rounded-full p-2 shadow text-xl opacity-0 group-hover:opacity-100 transition">&#128247;</span>
    </div>

    <!-- Форма -->
    <form id="profile-form" class="flex flex-col gap-4 w-full" autocomplete="off">
      <label><span>👤 Imię</span><input type="text" id="name" class="w-full border rounded-lg py-2 px-3"></label>
      <label><span>👤 Nazwisko</span><input type="text" id="surname" class="w-full border rounded-lg py-2 px-3"></label>
      <label><span>✉️ Email</span><input type="email" id="email" readonly class="w-full border rounded-lg py-2 px-3 opacity-60 cursor-not-allowed"></label>
      <label><span>📱 Telefon</span><input type="tel" id="phone" class="w-full border rounded-lg py-2 px-3"></label>
      <label><span>🎂 Data urodzenia</span><input type="date" id="birthdate" class="w-full border rounded-lg py-2 px-3"></label>
      <label><span>⚧️ Płeć</span>
        <select id="gender" class="w-full border rounded-lg py-2 px-3">
          <option value="">Wybierz...</option><option value="f">Kobieta</option><option value="m">Mężczyzna</option><option value="other">Inna</option>
        </select>
      </label>
      <label><span>⭐ Preferencje</span><textarea id="preferences" class="w-full border rounded-lg py-2 px-3" rows="2"></textarea></label>
      <button type="submit" class="w-full bg-gradient-to-r from-pink-500 to-blue-500 text-white py-2 rounded-xl">💾 Zapisz profil</button>
      <div id="profile-progress" class="mt-2 text-xs text-gray-500"></div>
    </form>

    <!-- Punkty -->
    <div class="bg-gradient-to-r from-pink-100 via-white to-cyan-100 rounded-2xl shadow-lg w-full text-center py-4">
      <h3 class="text-lg font-semibold">🎁 Twoje punkty <span id="user-level" class="ml-2 bg-pink-500 text-white text-xs px-3 py-1 rounded-full">Nowicjusz</span></h3>
      <p class="text-4xl font-black text-pink-500" id="userPoints">0 pkt</p>
    </div>

    <!-- Вийти -->
    <button id="logout-btn" class="mt-3 px-4 py-2 rounded-xl bg-red-600 text-white font-semibold w-full">Wyloguj się</button>
  </aside>

  <!-- Podgląd wydarzeń -->
  <section class="flex-1 flex flex-col gap-8">
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl py-8 px-4">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold">📅 Moje wydarzenia</h2>
        <a href="/pages/dashboard.html" class="bg-pink-500 text-white px-4 py-2 rounded-xl">➕ Dodaj wydarzenie</a>
      </div>
      <div id="event-list" class="space-y-4 min-h-[90px]"></div>
    </div>
  </section>
</main>

<footer class="bg-blue-500 text-white text-center py-4 mt-12 shadow-inner">
  &copy; 2025 HappyDate. Z miłością tworzymy niezapomniane chwile.
</footer>

<!-- 🔑 Env -->
<script src="/env.js"></script>

<!-- Supabase -->
<script type="module" src="/src/js/supabaseClient.js"></script>
<script type="module" src="/src/js/auth.js"></script>
<script type="module" src="/src/js/profile.js"></script>
</body>
</html>
