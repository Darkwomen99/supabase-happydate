<!DOCTYPE html>
<html lang="pl" class="bg-white text-gray-900 dark:bg-gray-900 dark:text-white transition-colors">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>HappyDate - Nie zapomnij o ważnych chwilach</title>

  <!-- SEO -->
  <meta name="description" content="HappyDate — Twój osobisty asystent prezentowy. Zaplanuj wyjątkowe prezenty z AI i emocjami!" />
  <meta name="keywords" content="prezenty, asystent prezentowy, kalendarz prezentów, prezent dla niej, prezent dla niego, AI gifts, prezenty online, HappyDate" />
  <meta name="author" content="HappyDate" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://www.happydate.pl/" />

  <!-- Open Graph -->
  <meta property="og:title" content="HappyDate - Magiczne prezenty na każdą okazję" />
  <meta property="og:description" content="Zaskocz bliskich wyjątkowymi prezentami i nie zapomnij o ważnych chwilach!" />
  <!-- TODO: zamień na swój baner w /public/img/ gdy dodasz plik -->
  <meta property="og:image" content="/public/img/11.png" />
  <meta property="og:url" content="https://www.happydate.pl/" />
  <meta property="og:type" content="website" />

  <!-- Favicon (tymczasowo korzystamy z istniejących plików w /public/img/) -->
  <!-- TODO: dodaj własne favicony do /public/img/ i zaktualizuj ścieżki -->
  <link rel="icon" type="image/png" sizes="32x32" href="/public/img/11.png">

  <!-- Tailwind CSS (bez defer, by uniknąć FOUC z CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- i18n -->
  <script src="https://unpkg.com/i18next@21.6.14/i18next.min.js" defer></script>
  <script src="https://unpkg.com/i18next-http-backend@1.4.1/i18nextHttpBackend.min.js" defer></script>

  <!-- AOS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js" defer></script>

  <!-- Custom -->
  <link rel="stylesheet" href="/src/css/style.css" />

  <style>
    @media (prefers-reduced-motion: reduce){.animate-bounce,.animate-ping,.animate-pulse{animation:none!important}}
    @keyframes fade-in { from { opacity:0; transform: translateY(5px);} to { opacity:1; transform: translateY(0);} }
    .animate-fade-in { animation: fade-in 0.3s ease-out forwards; }
  </style>
</head>
<body class="overflow-x-hidden">

<!-- Header -->
<header id="mainHeader"
  class="bg-gradient-to-r from-blue-400 to-cyan-400 py-3 sm:py-4 shadow-none sticky top-0 z-50 transition-shadow duration-300"
  aria-label="Główna nawigacja">
  <div class="max-w-7xl mx-auto px-2 sm:px-4 md:px-8">
    <div class="flex justify-between items-center">
      <div class="flex items-center gap-2">
        <a href="/index.html" id="logo-link"
           class="text-2xl font-bold hover:underline text-white"
           aria-label="HappyDate - prezentowy asystent">
          🎁 HappyDate
        </a>
        <span class="hidden md:inline ml-2 text-base italic text-white/90">
          Twój ciepły asystent prezentowy
        </span>
        <button
          id="audioBtn"
          title="Posłuchaj nas"
          class="text-white text-2xl p-2 rounded hover:bg-white/10 transition focus:ring-2 focus:ring-cyan-300"
          aria-label="Audio prezentacja"
          aria-controls="audioModal"
          type="button"
        >✨</button>
      </div>

      <button
        id="mobile-menu-toggle"
        class="text-white text-3xl sm:hidden p-2 rounded hover:bg-white/10 focus:ring-2 focus:ring-cyan-300 transition"
        aria-label="Menu"
        aria-controls="mobile-menu"
        aria-expanded="false"
        type="button"
      >☰</button>
    </div>

    <!-- Desktop nav -->
    <nav class="hidden sm:block mt-4 text-white" id="desktop-menu" aria-label="Menu desktop">
      <div class="flex justify-between items-center flex-wrap gap-4">
        <div class="flex gap-4 md:gap-6 items-center">
          <a href="/index.html" data-i18n="header.home" tabindex="0"
             class="px-1 py-0.5 rounded bg-white/20 underline font-semibold focus:bg-white/30 transition">Strona główna</a>
          <a href="/pages/services.html" data-i18n="header.services" tabindex="0"
             class="px-1 py-0.5 rounded hover:bg-white/20 focus:bg-white/30 transition">Usługi</a>
          <a href="/pages/dashboard.html" data-i18n="header.dashboard" tabindex="0"
             class="px-1 py-0.5 rounded hover:bg-white/20 focus:bg-white/30 transition">Moje wydarzenia</a>
          <a href="/pages/partnerstwo.html" data-i18n="header.partner" tabindex="0"
             class="px-1 py-0.5 rounded hover:bg-white/20 focus:bg-white/30 transition">Partnerstwo</a>
          <a href="/pages/about.html" data-i18n="header.about" tabindex="0"
             class="px-1 py-0.5 rounded hover:bg-white/20 focus:bg-white/30 transition">O nas</a>
          <a href="/pages/reviews.html" data-i18n="header.reviews" tabindex="0"
             class="px-1 py-0.5 rounded hover:bg-white/20 focus:bg-white/30 transition">Opinie</a>
        </div>

        <!-- Right side: language + auth -->
        <div class="flex gap-3 items-center flex-wrap">

          <!-- Language -->
          <div class="relative" id="lang-dropdown-wrap">
            <button id="langDropdownBtn"
              class="flex items-center gap-2 px-3 py-2 rounded border bg-white/10 text-white hover:bg-white/20 transition focus:ring-2 focus:ring-blue-300"
              aria-label="Zmień język"
              aria-haspopup="menu"
              aria-expanded="false"
              aria-controls="langDropdown"
              type="button">
              <span id="langFlag">🌐</span>
              <svg class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div id="langDropdown"
              class="absolute right-0 mt-2 bg-white shadow-xl rounded-xl z-50 py-2 min-w-[150px] hidden text-left transition-all duration-200 scale-95 opacity-0 origin-top-right"
              role="menu">
              <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100 transition" data-lang="pl" role="menuitem" tabindex="-1" aria-label="Polski"><span>🇵🇱</span> Polski</button>
              <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100 transition" data-lang="ua" role="menuitem" tabindex="-1" aria-label="Українська"><span>🇺🇦</span> Українська</button>
              <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100 transition" data-lang="en" role="menuitem" tabindex="-1" aria-label="English"><span>🇬🇧</span> English</button>
              <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100 transition" data-lang="ru" role="menuitem" tabindex="-1" aria-label="Русский"><span>🇷🇺</span> Русский</button>
              <button class="flex items-center gap-2 w-full px-4 py-3 text-base hover:bg-blue-100 transition" data-lang="de" role="menuitem" tabindex="-1" aria-label="Deutsch"><span>🇩🇪</span> Deutsch</button>
            </div>
          </div>

          <!-- Auth shortcuts (desktop) -->
          <a href="/pages/login.html"
             id="login-link"
             class="px-3 py-1.5 rounded-xl bg-white text-blue-700 font-semibold text-sm transition hover:bg-blue-50 hidden">Zaloguj się</a>
          <a href="/pages/register.html"
             id="register-link"
             class="px-3 py-1.5 rounded-xl bg-white/10 text-white font-semibold text-sm transition hover:bg-white/20 hidden">Rejestracja</a>

          <!-- User avatar -->
          <a href="/pages/profile.html" id="user-avatar-link" class="hidden" aria-label="Mój profil">
            <img id="user-avatar"
                 src="/public/img/11.png"
                 alt="Profil użytkownika"
                 class="w-10 h-10 rounded-full border-2 border-white shadow cursor-pointer hover:scale-105 transition" />
          </a>

          <button id="logout-btn"
                  class="hidden px-4 py-2 rounded-xl bg-red-600 text-white font-semibold text-sm transition hover:bg-red-700 focus:ring-2 focus:ring-red-300"
                  aria-label="Wyloguj się"
                  type="button">
                  Wyloguj się
          </button>
        </div>
      </div>
    </nav>

    <!-- Mobile -->
    <div id="mobile-menu" class="sm:hidden hidden mt-4 text-white space-y-3" aria-label="Menu mobilne">
      <div class="flex flex-col gap-2">
        <a href="/index.html" tabindex="0">Strona główna</a>
        <a href="/pages/services.html" tabindex="0">Usługi</a>
        <a href="/pages/dashboard.html" tabindex="0">Moje wydarzenia</a>
        <a href="/pages/partnerstwo.html" tabindex="0">Partnerstwo</a>
        <a href="/pages/about.html" tabindex="0">O nas</a>
        <a href="/pages/reviews.html" tabindex="0">Opinie</a>
      </div>
      <div class="flex gap-2 mt-4 flex-wrap" aria-label="Zmiana języka">
        <button class="lang-btn px-2 py-1 rounded border focus:ring-2 focus:ring-pink-400" data-lang="pl" aria-label="Polski" type="button">🇵🇱</button>
        <button class="lang-btn px-2 py-1 rounded border focus:ring-2 focus:ring-pink-400" data-lang="ua" aria-label="Українська" type="button">🇺🇦</button>
        <button class="lang-btn px-2 py-1 rounded border focus:ring-2 focus:ring-pink-400" data-lang="en" aria-label="English" type="button">🇬🇧</button>
        <button class="lang-btn px-2 py-1 rounded border focus:ring-2 focus:ring-pink-400" data-lang="ru" aria-label="Русский" type="button">🇷🇺</button>
        <button class="lang-btn px-2 py-1 rounded border focus:ring-2 focus:ring-pink-400" data-lang="de" aria-label="Deutsch" type="button">🇩🇪</button>
      </div>
      <div id="auth-buttons-mobile" class="flex flex-col gap-2 mt-3">
        <a href="/pages/register.html" id="register-link-mobile" class="px-3 py-1 rounded bg-white text-blue-600 font-semibold text-center transition hover:bg-blue-100">Rejestracja</a>
        <a href="/pages/login.html" id="login-link-mobile" class="px-3 py-1 rounded bg-white text-blue-600 font-semibold text-center transition hover:bg-blue-100">Zaloguj się</a>
        <a href="/pages/profile.html" id="dashboard-link-mobile" class="hidden px-3 py-1 rounded bg-green-600 text-white font-semibold text-center transition hover:bg-green-700">Panel użytkownika</a>
        <button id="logout-btn-mobile" class="hidden px-3 py-1 rounded bg-red-600 text-white font-semibold text-center transition hover:bg-red-700" type="button">Wyloguj się</button>
      </div>
    </div>
  </div>
</header>

<!-- Audio Modal -->
<dialog id="audioModal" class="rounded-2xl shadow-lg p-0 w-full max-w-md">
  <form method="dialog" class="p-6 bg-white dark:bg-gray-800 flex flex-col gap-4">
    <h3 class="text-lg font-bold">Krótka zapowiedź</h3>
    <p class="text-sm text-gray-600 dark:text-gray-300">Ciepło, emocje i prezenty — odkryj HappyDate w 30 sekund 💛</p>
    <audio controls class="w-full">
      <!-- TODO: podmień na istniejący plik w /public/audio/ -->
      <source src="/public/audio/ElevenLabs_2025-04-09T21_13_18....mp3" type="audio/mpeg" />
      Twoja przeglądarka nie wspiera audio.
    </audio>
    <div class="flex justify-end">
      <button class="px-4 py-2 rounded-lg border" aria-label="Zamknij okno audio">Zamknij</button>
    </div>
  </form>
</dialog>

<!-- Header interactions (menu/lang/audio) -->
<script defer>
(() => {
  const qs  = (s, r=document) => r.querySelector(s);
  const qsa = (s, r=document) => Array.from(r.querySelectorAll(s));

  const audioBtn = qs('#audioBtn');
  audioBtn?.addEventListener('click', () => qs('#audioModal')?.showModal());

  const mobileBtn  = qs('#mobile-menu-toggle');
  const mobileMenu = qs('#mobile-menu');
  mobileBtn?.addEventListener('click', () => {
    const isHidden = mobileMenu.classList.toggle('hidden');
    mobileBtn.setAttribute('aria-expanded', String(!isHidden));
  });

  const langBtn   = qs('#langDropdownBtn');
  const langMenu  = qs('#langDropdown');
  const langWrap  = qs('#lang-dropdown-wrap');
  const langFlag  = qs('#langFlag');
  const langMap   = { pl: "🇵🇱", ua: "🇺🇦", en: "🇬🇧", ru: "🇷🇺", de: "🇩🇪" };
  const currentLang = () => localStorage.getItem('lang') || (navigator.language?.slice(0,2) ?? 'pl');
  const updateLangFlag = () => { if(langFlag) langFlag.textContent = langMap[currentLang()] || '🌐'; };
  updateLangFlag();

  function openMenu(){ langMenu.classList.remove('hidden','scale-95','opacity-0'); langMenu.classList.add('scale-100','opacity-100'); langBtn.setAttribute('aria-expanded','true'); langBtn.querySelector('svg')?.classList.add('rotate-180'); qsa('[role="menuitem"]', langMenu)[0]?.focus();}
  function closeMenu(){ langMenu.classList.add('hidden','scale-95','opacity-0'); langMenu.classList.remove('scale-100','opacity-100'); langBtn.setAttribute('aria-expanded','false'); langBtn.querySelector('svg')?.classList.remove('rotate-180'); }
  langBtn?.addEventListener('click', (e)=>{ e.stopPropagation(); langMenu.classList.contains('hidden') ? openMenu() : closeMenu(); });
  document.addEventListener('click', (e)=>{ if(!langWrap?.contains(e.target)) closeMenu(); });
  langBtn?.addEventListener('keydown', (e)=>{ if(['ArrowDown','Enter',' '].includes(e.key)){ e.preventDefault(); openMenu(); }});
  langMenu?.addEventListener('keydown', (e)=>{
    const items = qsa('[role="menuitem"]', langMenu);
    const idx = items.indexOf(document.activeElement);
    if(e.key==='Escape'){ e.preventDefault(); closeMenu(); langBtn.focus(); }
    if(e.key==='ArrowDown'){ e.preventDefault(); (items[idx+1]||items[0])?.focus(); }
    if(e.key==='ArrowUp'){ e.preventDefault(); (items[idx-1]||items.at(-1))?.focus(); }
    if(e.key==='Home'){ e.preventDefault(); items[0]?.focus(); }
    if(e.key==='End'){ e.preventDefault(); items.at(-1)?.focus(); }
  });
  qsa('#langDropdown [role="menuitem"]').forEach(btn=> btn.addEventListener('click', ()=>{ localStorage.setItem('lang', btn.getAttribute('data-lang')); updateLangFlag(); closeMenu(); location.reload(); }));
  qsa('#mobile-menu .lang-btn').forEach(btn=> btn.addEventListener('click', ()=>{ localStorage.setItem('lang', btn.getAttribute('data-lang')); updateLangFlag(); location.reload(); }));
})();
</script>

<!-- Sticky help icon + popup -->
<div class="fixed bottom-6 left-6 z-50" aria-label="Szybki kontakt">
  <div class="relative">
    <button
      id="helpBtn"
      class="bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white rounded-full p-4 shadow-xl text-xl transition duration-300 ease-in-out focus:ring-2 focus:ring-blue-300"
      aria-label="Szybki kontakt telefoniczny lub mailowy"
      aria-controls="helpPopup"
      aria-expanded="false"
      type="button"
    >📞</button>

    <div
      id="helpPopup"
      class="hidden absolute left-16 bottom-0 bg-white border border-gray-200 rounded-xl shadow-xl p-4 text-sm w-64 animate-fade-in z-50"
      role="dialog"
      aria-modal="true"
      aria-label="Pomoc"
    >
      <p class="text-gray-800 font-semibold mb-1">Potrzebujesz pomocy?</p>
      <p><a href="tel:+48123123123" class="text-blue-600 hover:underline" aria-label="Zadzwoń do nas">📱 +48 123 123 123</a></p>
      <p><a href="mailto:happyddate@gmail.com" class="text-blue-600 hover:underline" aria-label="Napisz do nas">📩 happyddate@gmail.com</a></p>
    </div>
  </div>
</div>

<!-- HERO -->
<section class="bg-gradient-to-r from-pink-100 via-yellow-100 to-blue-100 py-16 sm:py-20 px-2 md:px-12 text-center relative overflow-hidden">
  <div class="max-w-4xl mx-auto z-10 relative" data-aos="fade-up">
    <h2 class="text-4xl md:text-5xl font-extrabold mb-6 text-gray-900 leading-tight" data-i18n="hero.title">
      HappyDate — ciepły asystent, który przypomina o ważnych chwilach i pomaga wybrać prezenty prosto z serca 💛
    </h2>
    <p class="text-lg md:text-xl text-gray-700 mb-8" data-i18n="hero.description">
      Zatrzymaj czas, spraw komuś niespodziankę i zobacz łzy radości...
    </p>
    <div class="flex flex-col sm:flex-row justify-center gap-4 sm:gap-8 min-w-0">
      <a
        href="/pages/generator.html"
        class="px-6 py-3 bg-pink-500 text-white rounded-xl text-lg font-semibold shadow-md
               hover:bg-pink-600 hover:scale-105 hover:shadow-xl
               focus:bg-pink-600 focus:scale-105 focus:shadow-xl
               active:scale-95
               transition-all duration-200 ease-in-out focus:ring-2 focus:ring-pink-400 w-full sm:w-auto"
        data-i18n="hero.ctaFind"
        aria-label="Znajdź prezent"
      >
        Znajdź prezent <span class="inline-block animate-bounce ml-1">🎁</span>
      </a>
      <a
        href="/pages/dashboard.html"
        class="px-6 py-3 bg-yellow-400 text-gray-900 rounded-xl text-lg font-semibold shadow-md
               hover:bg-yellow-500 hover:scale-105 hover:shadow-xl
               focus:bg-yellow-500 focus:scale-105 focus:shadow-xl
               active:scale-95
               transition-all duration-200 ease-in-out focus:ring-2 focus:ring-yellow-300 w-full sm:w-auto"
        data-i18n="hero.ctaAdd"
        aria-label="Dodaj wydarzenie"
      >
        Dodaj wydarzenie <span class="inline-block animate-bounce ml-1">📅</span>
      </a>
    </div>
  </div>

  <!-- dekor -->
  <div class="absolute animate-pulse text-pink-400 text-2xl sm:text-3xl top-4 sm:top-10 left-4 sm:left-10 pointer-events-none select-none" aria-hidden="true">💖</div>
  <div class="absolute animate-ping text-yellow-400 text-xl sm:text-2xl top-24 sm:top-32 right-4 sm:right-12 pointer-events-none select-none" aria-hidden="true">✨</div>
</section>

<!-- How it works -->
<section id="wowBlock" class="transition-all duration-700 ease-in-out translate-y-10 opacity-0 py-16 bg-white dark:bg-gray-900" aria-label="Jak to działa?">
  <div class="max-w-4xl mx-auto text-center px-4">
    <h3 class="text-2xl font-semibold mb-10" data-i18n="howItWorks.title">Jak to działa?</h3>
    <div class="grid sm:grid-cols-3 gap-8">
      <div data-aos="zoom-in" data-aos-delay="0">
        <span class="block text-3xl mb-2 font-extrabold text-blue-400">1</span>
        <p data-i18n="howItWorks.step1">Dodajesz wydarzenie do kalendarza</p>
      </div>
      <div data-aos="zoom-in" data-aos-delay="100">
        <span class="block text-3xl mb-2 font-extrabold text-pink-400">2</span>
        <p data-i18n="howItWorks.step2">Wypełniasz szczegóły i preferencje</p>
      </div>
      <div data-aos="zoom-in" data-aos-delay="200">
        <span class="block text-3xl mb-2 font-extrabold text-yellow-400">3</span>
        <p data-i18n="howItWorks.step3">My zajmujemy się resztą ❤️</p>
      </div>
    </div>
  </div>
</section>

<!-- Advantages -->
<section class="py-20 bg-gray-100 dark:bg-gray-800" aria-label="Dlaczego HappyDate?">
  <div class="max-w-4xl mx-auto px-4">
    <h3 class="text-2xl font-semibold text-center mb-12" data-i18n="advantages.title">Dlaczego HappyDate?</h3>
    <div class="space-y-10 md:space-y-8">
      <div>
        <h4 class="text-xl font-bold mb-2 flex items-center gap-2" data-i18n="advantages.ai">
          <span>🤖</span> <span>AI — Inteligentny dobór prezentów</span>
        </h4>
        <p class="text-gray-700 dark:text-gray-300" data-i18n="advantages.aiDesc">
          Nasz AI pomoże Ci wybrać idealny prezent, uwzględniając preferencje obdarowanej osoby.
        </p>
      </div>
      <div>
        <h4 class="text-xl font-bold mb-2 flex items-center gap-2" data-i18n="advantages.privacy">
          <span>🔐</span> <span>Anonimowość i bezpieczeństwo</span>
        </h4>
        <p class="text-gray-700 dark:text-gray-300" data-i18n="advantages.privacyDesc">
          Twoje dane są bezpieczne. Gwarantujemy pełną anonimowość.
        </p>
      </div>
      <div>
        <h4 class="text-xl font-bold mb-2 flex items-center gap-2" data-i18n="advantages.delivery">
          <span>🚚</span> <span>Wygodna dostawa na czas</span>
        </h4>
        <p class="text-gray-700 dark:text-gray-300" data-i18n="advantages.deliveryDesc">
          Prezent dotrze dokładnie wtedy, kiedy powinien — bez stresu.
        </p>
      </div>
      <div>
        <h4 class="text-xl font-bold mb-2 flex items-center gap-2" data-i18n="advantages.emotions">
          <span>❤️</span> <span>Emocje na pierwszym miejscu</span>
        </h4>
        <p class="text-gray-700 dark:text-gray-300" data-i18n="advantages.emotionsDesc">
          HappyDate to więcej niż prezent — to chwila, wspomnienie i miłość.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- Reviews -->
<section class="bg-white dark:bg-gray-900 py-16" aria-label="Opinie użytkowników">
  <div class="max-w-4xl mx-auto px-4 text-center">
    <h3 class="text-2xl font-semibold mb-10" data-i18n="reviews.title">Opinie naszych użytkowników 💬</h3>
    <div class="grid gap-6 md:grid-cols-3">
      <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-xl shadow">
        <p data-i18n="reviews.adam.text">🎁 “Dzięki HappyDate nie zapomniałem o urodzinach żony. Prezent był strzałem w dziesiątkę!”</p>
        <p class="text-sm mt-3 text-gray-600 dark:text-gray-400" data-i18n="reviews.adam.author">— Adam, Warszawa</p>
      </div>
      <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-xl shadow">
        <p data-i18n="reviews.kasia.text">💌 “Zgodziłam się z siostrą po latach — prezent z HappyDate to był przełom!”</p>
        <p class="text-sm mt-3 text-gray-600 dark:text-gray-400" data-i18n="reviews.kasia.author">— Kasia, Gdańsk</p>
      </div>
      <div class="bg-gray-100 dark:bg-gray-800 p-6 rounded-xl shadow">
        <p data-i18n="reviews.ola.text">🌟 “Dostałam kwiaty i voucher w dzień Mamy — dokładnie tak, jak marzyłam.”</p>
        <p class="text-sm mt-3 text-gray-600 dark:text-gray-400" data-i18n="reviews.ola.author">— Ola, Kraków</p>
      </div>
    </div>
  </div>
</section>

<!-- Gifts -->
<section class="bg-gray-100 dark:bg-gray-800 py-20 pb-12" aria-label="Galeria przykładowych prezentów">
  <div class="max-w-6xl mx-auto px-4">
    <h3 class="text-2xl font-semibold text-center mb-12" data-i18n="gifts.title">🎁 Przykładowe prezenty</h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6 min-w-0">
      <!-- TODO: podmień na swoje realne zdjęcia w /public/img/ -->
      <div class="bg-white dark:bg-gray-900 p-4 rounded-xl shadow text-center group hover:shadow-xl transition-shadow duration-300">
        <img src="/public/img/money.png" alt="Zestaw prezentowy — przykład 1"
             class="rounded mb-3 w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"
             loading="lazy">
        <p class="font-medium" data-i18n="gifts.romantic">Zestaw SPA + kartka „Kocham Cię”</p>
      </div>
      <div class="bg-white dark:bg-gray-900 p-4 rounded-xl shadow text-center group hover:shadow-xl transition-shadow duration-300">
        <img src="/public/img/11.png" alt="Zestaw prezentowy — przykład 2"
             class="rounded mb-3 w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"
             loading="lazy">
        <p class="font-medium" data-i18n="gifts.flowers">Kwiaty + list z przeprosinami</p>
      </div>
      <div class="bg-white dark:bg-gray-900 p-4 rounded-xl shadow text-center group hover:shadow-xl transition-shadow duration-300">
        <img src="/public/img/11.png" alt="Zestaw prezentowy — przykład 3"
             class="rounded mb-3 w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"
             loading="lazy">
        <p class="font-medium" data-i18n="gifts.box">Box z niespodzianką + voucher</p>
      </div>
      <div class="bg-white dark:bg-gray-900 p-4 rounded-xl shadow text-center group hover:shadow-xl transition-shadow duration-300">
        <img src="/public/img/money.png" alt="Zestaw prezentowy — przykład 4"
             class="rounded mb-3 w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"
             loading="lazy">
        <p class="font-medium" data-i18n="gifts.voucher">Voucher na masaż i kolację</p>
      </div>
    </div>
  </div>
</section>

<footer class="bg-blue-500 text-white py-6 mt-12" aria-label="Stopka HappyDate">
  <div class="max-w-4xl mx-auto text-center px-4 text-sm md:text-base" data-i18n="footer.text">
    &copy; 2025 HappyDate. Z miłością tworzymy niezapomniane chwile.<br>
    <span class="text-xs opacity-80">Projekt & UX: HappyDate Team | <a href="/pages/privacy.html" class="underline hover:text-yellow-200">Polityka prywatności</a></span>
  </div>
</footer>

<!-- Main JS -->
<script src="/src/js/main.js" defer></script>

<!-- Chatbot -->
<div id="chatbot-toggle" class="fixed bottom-6 right-6 z-50" aria-label="Otwórz chatbota HappyBot">
  <button id="chatToggleBtn"
    class="bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-300 focus:ring-2 focus:ring-blue-300"
    aria-label="Wyślij pytanie do HappyBot"
    aria-controls="chatbot-window"
    aria-expanded="false"
    type="button"
  >💬</button>
</div>

<div id="chatbot-window" class="hidden fixed bottom-20 right-6 w-80 max-w-full bg-white dark:bg-gray-800 border rounded-xl shadow-2xl z-50 overflow-hidden" role="dialog" aria-modal="true" aria-label="Chatbot HappyBot">
  <div class="bg-blue-600 text-white p-4 font-semibold">
    🤖 HappyBot — Twój doradca prezentowy
  </div>
  <div class="p-4 text-sm h-64 overflow-y-auto" id="chat-content">
    <p class="text-gray-700 dark:text-gray-200">Cześć! Jak mogę Ci pomóc znaleźć idealny prezent? 🎁</p>
  </div>
  <div class="p-2 border-t flex items-center bg-gray-50 dark:bg-gray-700">
    <input type="text" id="chat-input" class="flex-1 p-2 text-sm rounded-l border border-gray-300 dark:bg-gray-800 dark:text-white" placeholder="Zadaj pytanie..." aria-label="Twoja wiadomość">
    <button id="chatSendBtn" class="bg-blue-500 text-white px-3 py-2 rounded-r" type="button">Wyślij</button>
  </div>
</div>

<script defer>
(() => {
  const chatWindow = document.getElementById('chatbot-window');
  const chatToggle = document.getElementById('chatToggleBtn');
  const chatInput  = document.getElementById('chat-input');
  const chatSend   = document.getElementById('chatSendBtn');
  const chatBody   = document.getElementById('chat-content');

  const isOpen = () => !chatWindow.classList.contains('hidden');
  const openChat = () => { chatWindow.classList.remove('hidden'); chatToggle.setAttribute('aria-expanded','true'); setTimeout(()=>chatInput.focus(), 50); };
  const closeChat = () => { chatWindow.classList.add('hidden'); chatToggle.setAttribute('aria-expanded','false'); chatToggle.focus(); };

  chatToggle?.addEventListener('click', () => (isOpen() ? closeChat() : openChat()));
  document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && isOpen()) closeChat(); });

  function appendMsg(text, who = 'user') {
    const p = document.createElement('p');
    p.className = who === 'user' ? 'mt-2 text-right text-blue-600 dark:text-blue-400' : 'mt-2 text-gray-700 dark:text-gray-200';
    p.innerHTML = `<strong>${who === 'user' ? 'Ty: ' : 'HappyBot: '}</strong><span>${text}</span>`;
    chatBody.appendChild(p);
    chatBody.scrollTop = chatBody.scrollHeight;
  }

  function send() {
    const msg = chatInput.value.trim();
    if (!msg) return;
    appendMsg(msg, 'user');
    chatInput.value = '';
    setTimeout(() => appendMsg('Świetny wybór! 🎁 Masz jeszcze inne pytania?', 'bot'), 500);
  }

  chatSend?.addEventListener('click', send);
  chatInput?.addEventListener('keydown', (e) => { if (e.key === 'Enter') send(); });
})();
</script>

<!-- Cookies (PL) -->
<div id="cookieConsent" class="fixed bottom-0 inset-x-0 bg-gray-800 bg-opacity-90 text-white py-4 px-6 z-50 hidden" role="dialog" aria-modal="true" aria-label="Informacja o plikach cookies">
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
    <p class="text-sm md:text-base" data-i18n="cookies.text">
      Ta strona używa plików cookies, by ulepszyć Twój komfort. Korzystając dalej z serwisu, akceptujesz naszą
      <a href="/pages/privacy.html" class="underline hover:text-blue-300" target="_blank" rel="noopener">Politykę Prywatności</a>.
    </p>
    <button id="acceptCookies" class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-md font-semibold transition focus:ring-2 focus:ring-blue-400" aria-label="Akceptuję cookies">
      <span data-i18n="cookies.accept">Akceptuję</span>
    </button>
  </div>
</div>
<script defer>
document.addEventListener("DOMContentLoaded", () => {
  const cookieConsent = document.getElementById('cookieConsent');
  const acceptBtn = document.getElementById('acceptCookies');
  if (!localStorage.getItem('happydate_cookie_consent')) cookieConsent.classList.remove('hidden');
  acceptBtn.addEventListener('click', () => { localStorage.setItem('happydate_cookie_consent', 'true'); cookieConsent.classList.add('hidden'); });
});
</script>

<!-- i18n init -->
<script defer>
(function() {
  const supportedLangs = ["pl", "ua", "en", "ru", "de"];
  const browserLang = navigator.language?.slice(0, 2) || "pl";
  const initialLang = localStorage.getItem("lang") || (supportedLangs.includes(browserLang) ? browserLang : "pl");

  i18next
    .use(i18nextHttpBackend)
    .init({
      lng: initialLang,
      fallbackLng: "pl",
      backend: { loadPath: `/src/i18n/{{lng}}.json` }
    }, function(err, t) {
      document.querySelectorAll("[data-i18n]").forEach(el => {
        const key = el.getAttribute("data-i18n");
        if (i18next.exists(key)) el.innerHTML = t(key);
      });
    });

  document.querySelectorAll(".lang-btn").forEach(btn => {
    btn.addEventListener("click", function () {
      const lang = this.getAttribute("data-lang");
      if (!supportedLangs.includes(lang)) return;
      localStorage.setItem("lang", lang);
      i18next.changeLanguage(lang).then(() => {
        document.querySelectorAll("[data-i18n]").forEach(el => {
          const key = el.getAttribute("data-i18n");
          if (i18next.exists(key)) el.innerHTML = i18next.t(key);
        });
      });
    });
  });
})();
</script>

<!-- AOS -->
<script defer>
  document.addEventListener('DOMContentLoaded', () => {
    if (window.AOS) AOS.init({ duration: 700, once: true, offset: 60 });
  });
</script>

<!-- WOW block reveal -->
<script defer>
document.addEventListener("DOMContentLoaded", () => {
  const el = document.getElementById('wowBlock');
  if (!el) return;
  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        el.classList.remove('translate-y-10', 'opacity-0');
        el.classList.add('translate-y-0', 'opacity-100');
        observer.unobserve(el);
      }
    });
  }, { threshold: 0.3 });
  observer.observe(el);
});
</script>

<!-- ===== Supabase: header auth UI (opcjonalnie, gdy masz /src/js/auth.js i supabaseClient.js) ===== -->
<script type="module">
  let supabase;
  try {
    ({ supabase } = await import('/src/js/supabaseClient.js'));
    await import('/src/js/auth.js').catch(()=>{});
  } catch(e) {
    console.warn('[supabase] pominięto — brak klienta lub w trybie standalone');
  }

  const $ = (s, r = document) => r.querySelector(s);
  const avatarLink   = $("#user-avatar-link");
  const avatarImg    = $("#user-avatar");
  const loginLink    = $("#login-link");
  const registerLink = $("#register-link");
  const logoutBtn    = $("#logout-btn");
  const loginLinkM     = $("#login-link-mobile");
  const registerLinkM  = $("#register-link-mobile");
  const dashboardLinkM = $("#dashboard-link-mobile");
  const logoutBtnM     = $("#logout-btn-mobile");

  async function updateHeaderAuthUI() {
    try {
      if (!supabase?.auth?.getUser) return;
      const { data: { user } } = await supabase.auth.getUser();

      if (user) {
        const meta = user.user_metadata || {};
        const avatarUrl = (meta.avatar_url || meta.picture || "/public/img/11.png").trim();
        if (avatarImg) {
          avatarImg.src = avatarUrl;
          avatarImg.alt = meta.full_name || user.email || "Profil użytkownika";
          avatarImg.referrerPolicy = "no-referrer";
        }
        avatarLink?.classList.remove("hidden");
        logoutBtn?.classList.remove("hidden");
        loginLink?.classList.add("hidden");
        registerLink?.classList.add("hidden");

        dashboardLinkM?.classList.remove("hidden");
        logoutBtnM?.classList.remove("hidden");
        loginLinkM?.classList.add("hidden");
        registerLinkM?.classList.add("hidden");
      } else {
        avatarLink?.classList.add("hidden");
        logoutBtn?.classList.add("hidden");
        loginLink?.classList.remove("hidden");
        registerLink?.classList.remove("hidden");

        dashboardLinkM?.classList.add("hidden");
        logoutBtnM?.classList.add("hidden");
        loginLinkM?.classList.remove("hidden");
        registerLinkM?.classList.remove("hidden");
      }
    } catch (e) {
      console.error("[header-auth] update error:", e);
    }
  }

  updateHeaderAuthUI();
  if (supabase?.auth?.onAuthStateChange) {
    supabase.auth.onAuthStateChange(() => updateHeaderAuthUI());
  }

  const signOut = async () => {
    try {
      await supabase?.auth?.signOut?.();
      window.location.href = "/index.html";
    } catch (e) {
      console.error("[header-auth] signOut error:", e);
    }
  };
  logoutBtn?.addEventListener("click", signOut);
  logoutBtnM?.addEventListener("click", signOut);
</script>

</body>
</html>
